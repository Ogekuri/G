#
# git ".gitconfig" configurator file
#
# Copyright 2017-2018 Francesco Rolando and contributors.
# Available under the GPL v2 license. See LICENSE.txt.
#

### users preferences ###
[user]
	name = Francesco Rolando
	email = ogekuri@gmail.com

[credential]

[core]
	editor = /usr/bin/cudatext
#	sshCommand = ssh -i '/home/ogekuri/putty/id_dsa_1024.key'
	sshCommand = ssh -i '/home/ogekuri/putty/id_rsa.key'
	
### aliases ###

#D = comment out dangerous commands

[alias]
	aa    = add --all
	ar    = ! "git archive master --prefix='/' | gzip > `git describe master`.tar.gz"
	br    = branch
	brall = branch -v -a
	ck    = diff --check
	cm    = commit -m
	cma   = commit -a -m
	co    = checkout
	cowrk = ! "git co work"
	codev = ! "git co develop"
	comas = ! "git co master"
	mkwrk = ! "git co -b work"
	rmwrk = ! "git branch -d work"
	conf  = ! "/usr/bin/cudatext .git/config"
	de    = describe
# commentato perch√© rimuove .metadata	
#D	disca = ! "git clean -fdx && git reset --hard HEAD"
	di    = checkout --
	diyou = checkout --ours --
	dime  = checkout --theirs --
	ed    = ! "f() { file=${1}; if [ -n \"$file\" ] ; then /usr/bin/cudatext \"$file\"; fi }; f"
	edcfg = ! "git ed ~/.gitconfig"
	edign = ! "git ed ~/.gitignore"
	edpro = ! "git ed ~/.profile"
	edbsh = ! "git ed ~/.bash_profile"
	edbrc = ! "git ed ~/.bashrc"
	fe    = fetch
	feall = ! "git fe --all --tags --prune" # --prune = prune remote-tracking branches no longer on remote
	fedev = ! "git fe --tags --prune origin develop"
	femas = ! "git fe --tags --prune origin master"
# fanno dei danni
#D	goto  = ! "f() { branch=${1}; if [ -n \"$branch\" ] ; then echo \"Discard all changes and goto to last commit on a branch \\\"$branch\\\" from origin\" && git rs && git feall && git co -f $branch && git pull && git gr && git st; else echo \"usage: git goto \\\"<branch>\\\" \"; fi }; f"
#D	gowrk = ! "git goto work"
#D	godev = ! "git goto develop"
#D	gomas = ! "git goto master"
#D	gotag = ! "f() { tag=${1}; if [ -n \"$tag\" ] ; then echo \"Discard all changes and goto to last commit on a tag \\\"$tag\\\" from origin\" && git rs && git feall && git br -d branch-from-tag_$tag && git co -f tags/$tag -b branch-from-tag_$tag && git gr && git st; else echo \"usage: git goto \\\"<tag>\\\" \"; fi }; f"
	gp    = ! "gitk --all"
	gr    = ! "gitk --simplify-by-decoration --all"
	hl    = ! "git --help ${1}"
	la    = ! "git config --list | grep ^alias\\. | grep '=' | grep -v 'echo -e "' | cut -c 7- | grep -Ei --color \"$1\" "#"
	lg    = ! "git lg2"
	lg1   = log --all --decorate --oneline --graph
	lg2   = log --graph --abbrev-commit --decorate --format=format:'%C(bold blue)%h%C(reset) - %C(bold green)(%ar)%C(reset) %C(white)%s%C(reset) %C(dim white)- %an%C(reset)%C(bold yellow)%d%C(reset)' --all
	lg3   = log --graph --abbrev-commit --decorate --format=format:'%C(bold blue)%h%C(reset) - %C(bold cyan)%aD%C(reset) %C(bold green)(%ar)%C(reset)%C(bold yellow)%d%C(reset)%n'' %C(white)%s%C(reset) %C(dim white)- %an%C(reset)' --all
	ll    = log --pretty=oneline
	lm    = log --merges
	lh    = log -1 HEAD
	lt    = tag -l
	me    = merge --ff-only
	medev = merge --ff-only develop
	mewrk = merge --ff-only work
	mkmas = ! "git codev && git pldev && git cowrk && git medev && git codev && git pldev && git mewrk && git pudev && git comas && git plmas && git medev && git pumas && git cowrk && git lg; git st"
    mkdev = ! "git codev && git pldev && git cowrk && git medev && git codev && git pldev && git mewrk && git pudev && git cowrk && git lg; git st"
	mkcma  = ! "f() { comment=${1}; if [ -n \"$comment\" ] ; then echo \"Commit and merge on develop with comment: \\\"$comment\\\" on develop brach\" && git cma \"$comment\" && git mkdev; else echo \"usage: git mkcma \\\"<comment>\\\"\"; fi }; f"
	mkyday =  ! "git cma \"In progress $(date -d yesterday +'%Y-%m-%d %H:%M')\" && git mkdev"
	mktday =  ! "git cma \"In progress $(date +'%Y-%m-%d %H:%M')\" && git mkdev"
	mkrepo =  ! "f() { name=${1}; if [ -n \"$name\" ] ; then echo \"Make new repo for : \\\"$name\\\"\" && git clone \"ssh://git@donsrv707.dl.net/git/$name.git\" && cd \"$name\" && git init && cp $HOME/.gitignore .gitignore.example && git add .gitignore.example && git commit -m \"Initial empty commit\" && git remote remove origin && git remote add origin \"ssh://git@donsrv707.dl.net/git/$name.git\" && git push origin master && git checkout -b develop && mv .gitignore.example .gitignore && git add --all && git commit -m \"First commit, add .gitignore file\" && git push origin develop && cd ..; else echo \"usage: git mkrepo \\\"<name>\\\"\"; fi }; f"
	pl    = pull --ff-only
	pldev = pull --ff-only origin develop
	plmas = pull --ff-only origin master
	pt    = push --tags
	pu    = push -u
#D	puall = push -u --all
	pudev = push -u origin develop
	pumas = push -u origin master
	rf    = reflog
	rmtg  = ! "f() { tag=${1}; if [ -n \"$tag\" ] ; then echo \"Remove tag tag: \\\"$tag\\\"\" && git tag --delete \"$tag\" && git git push --delete origin \"$tag\"; else echo \"usage: git rmtg \\\"<tag>\\\" \"; fi }; f"
	rmloc = reset --hard --
	rmstg = rm --cached --
	rmunt = clean -d -f --
	rs    = reset --hard HEAD
	rssft = reset --soft --
	rsmix = reset --mixed --
	rshrd = reset --hard --
	rsmrg = reset --merge --
	rskep = reset --keep --
	st    = status
	tg    = tag -a -m 
	tree  = ! "git lg3"
	unstg = reset --mixed --
	ver   = tag -l
	release  = ! "f() { tag=${1}; comment=${2}; if [ -n \"$tag\" -a -n \"$comment\" ] ; then echo \"Make new release with tag: \\\"$tag\\\" - comment: \\\"$comment\\\" on master brach\" && git codev && git fedev && git mewrk && git pudev && git comas && git femas && git medev && git pumas && git tg \"$tag: $comment\" \"$tag\" && git push origin \"$tag\" && git cowrk && git lg; git st; else echo \"Release last commit on work into master branch with tag\n- usage: git release \\\"<tag>\\\" \\\"<comment>\\\"\n- example: git release \\\"FW-MARKER-AREX400AF-510\\\" \\\"Rilascio della versione PLD-AREX400AF-240325_FW-MARKER-AREX400AF-510\\\"\"; fi }; f"
	cmarelease  = ! "f() { tag=${1}; comment=${2}; if [ -n \"$tag\" -a -n \"$comment\" ] ; then echo \"Commit all files with tag: \\\"$tag\\\" - comment: \\\"$comment\\\" on work brach\" && git cma \"$tag: $comment\" && git release \"$tag\" \"$comment\"; else echo \"Commit all file on work branch and release into master branch with tag\n- usage: git cmarelease \\\"<tag>\\\" \\\"<comment>\\\"\n- example: git cmarelease \\\"FW-MARKER-AREX400AF-510\\\" \\\"Rilascio della versione PLD-AREX400AF-240325_FW-MARKER-AREX400AF-510\\\"\"; fi }; f"

	
### help aliases ###
	
	hlal = "!f() { \
            echo -e \"\"; \
            echo -e \" git hl - print aliases help screen\"; \
            echo -e \"\"; \
            echo -e \" aa    = Add all file changes/added to stage area for commit. \"; \
            echo -e \" ar    = Archive master as zip file. Use tag as filename. \"; \
            echo -e \" br    = Create a new brach. \"; \
            echo -e \" brall = Print all branches. \"; \
            echo -e \" ck    = Check differences. \"; \
            echo -e \" cm    = Commit with annotation: git cm '<descritoon>'. \"; \
            echo -e \" cma   = Add all files and commit with annotation: git cma '<descritoon>'. \"; \
            echo -e \" co    = Checkout a specific branch: git co '<branch>'. \"; \
            echo -e \" cowrk = Checkout the work branch. \"; \
            echo -e \" codev = Checkout the develop branch. \"; \
            echo -e \" comas = Checkout the master branch. \"; \
            echo -e \" mkwrk = Create local work branch. \"; \
            echo -e \" rmwrk = Delete local work branch. \"; \
            echo -e \" conf  = Edit this repository configuration file: .git/config. \"; \
            echo -e \" de    = Describe current version with tag of last commit. \"; \
            echo -e \" di    = Discard current changes on file: git di '<filename>' \"; \
            echo -e \" diyou = Discard merge changes in favour of mine files. \"; \
            echo -e \" dime  = Discard merge chanhes in favour of yours files. \"; \
            echo -e \" ed    = Edit a file. Syntax: git ed <filename>. \"; \
            echo -e \" edcfg = Edit git .gitconfig file. This file. \"; \
            echo -e \" edign = Edit git .gitignore configuration file. \"; \
            echo -e \" edpro = Edit bash ~/.profile file. \"; \
            echo -e \" edbsh = Edit bash ~/.bash_profile file. \"; \
            echo -e \" edbrc = Edit bash ~/.bashrc file. \"; \
            echo -e \" fe    = Fetch new data of current branch from origin. \"; \
            echo -e \" feall = Fetch new data from origin for all branch. \"; \
            echo -e \" fedev = Fetch new data from origin for develop branch. \"; \
            echo -e \" femas = Fetch new data from origin for master branch. \"; \
            echo -e \" goto  = Discard all changes and goto to last commit on a branch. \"; \
			echo -e \" gowrk = Discard all changes and goto to last commit on a work branch. \"; \
            echo -e \" godev = Discard all changes and goto to last commit on a develop branch. \"; \
            echo -e \" gomas = Discard all changes and goto to last commit on a master branch. \"; \
            echo -e \" gotag = Discard all changes and goto to last commit on a tag. \"; \
            echo -e \" gp    = Open git commits graph (Git K). \"; \
            echo -e \" gr    = Open git tags graph (Git K). \"; \
            echo -e \" hl    = Help of specific topic. Syntax: git hl <alias|command|..>. \"; \
            echo -e \" hlal  = Help of an aliases. This help. \"; \
            echo -e \" hlrs  = Help of reset commands. \"; \
            echo -e \" la    = Print all current aliases\"; \
            echo -e \" lg    = Show commit history. \"; \
            echo -e \" ll    = Show lastest full commit hash. \"; \
            echo -e \" lm    = Show all merges. \"; \
            echo -e \" lh    = Show last commit details\"; \
            echo -e \" lt    = Show all tag\"; \
            echo -e \" me    = Merge\"; \
            echo -e \" mewrk = Merge work branch on current branch. \"; \
            echo -e \" medev = Merge develop branch on current branch. \"; \
			echo -e \" mktg  = Merge work on develop, merge develop on master, then push master, finally create a new tag on master. Syntax: git mktg <tag> <description>. \"; \
            echo -e \" mkmas = Merge work on develop, merge develop on master, then push master. Syntax: git mkmas. \"; \
			echo -e \" mkdev = Merge work on develop, then puth develop. Syntax: git mkdev. \"; \
			echo -e \" mkcma = Commit all files with a comment and mkdev. Syntax: git mkcma <description>. \"; \
			echo -e \" mkyday = Commit all files with yesterday date as comment and mkdev. Syntax: git mkyday. \"; \
			echo -e \" mktday = Commit all files with today date as comment and mkdev. Syntax: git mktday. \"; \
			echo -e \" mkrepo = Create new fresh repository from remote url with inizial commit. Syntax: git mkrepo <url>. \"; \
            echo -e \" pl    = Pull (fetch + merge FETCH_HEAD) from origin on current branch. \"; \
            echo -e \" pldev = Pull (fetch + merge FETCH_HEAD) from origin develop to current branch. \"; \
            echo -e \" plmas = Pull (fetch + merge FETCH_HEAD) from origin master to current branch.\"; \
            echo -e \" pt    = Push all new tags to origin. \"; \
            echo -e \" pu    = Push current branch to origin (add upstream (tracking) reference for pull). \"; \
            echo -e \" puall = Push all changes on all branches (add upstream (tracking) reference for pull). \"; \
            echo -e \" pumas = Push all changes of current branch on origin/master. (add upstream reference for pull). \"; \
            echo -e \" rf    = Show changes on HEAD reference. \"; \
            echo -e \" rmtg  = Remove a tag on current branch and from origin. \"; \
            echo -e \" rmloc = Remove changed files from the working tree. \"; \
            echo -e \" rmstg = Remove staged files from index tree. \"; \
            echo -e \" rmunt = Remove untracked files from the working tree. \"; \
            echo -e \" rs    = Reset current branch to HEAD (--hard). \"; \
            echo -e \" rssft = Soft reset alias (--soft). \"; \
            echo -e \" rsmix = Mixed reset alias (--mixed). \"; \
            echo -e \" rshrd = Hard reset alias (--hard). \"; \
            echo -e \" rsmrg = Merge reset alias (--merge). \"; \
            echo -e \" rskep = Keep reset alias (--keep). \"; \
            echo -e \" st    = Show current GIT status. \"; \
            echo -e \" tg    = Create a new annotate tag. Syntax: git tg <description> <tag>. \"; \
            echo -e \" tree  = Show commit's tree. \"; \
            echo -e \" unstg = Un-stage a file from commit: git unstg '<filename>'. Unstage all files with: git unstg *. \"; \
            echo -e \" ver   = Primt all version tags. \"; \
	        echo -e \" release   = Make release process and create tag on master with current commit [ last commit on work -> develop -> master -> tag ]. \"; \
	        echo -e \" cmarelease   = Make a commit with all files and do a release [ commit all file on work -> develop -> master -> tag ]. \"; \
            }; \
            f"

	hlrs = "!f() { \
            echo -e \"\"; \
            echo -e \" git hlrs - print reset mode help screen\"; \
            echo -e \"\"; \
            echo -e \" default mode = '--mixed'\"; \
            echo -e \"\"; \
            echo -e \" working - area di lavoro\"; \
            echo -e \" index   - staging + ready to commit\"; \
            echo -e \" HEAD    - ultimo commit\"; \
            echo -e \" target  - example: origin/mster\"; \
            echo -e \"\"; \
            echo -e \" working index HEAD target         working index HEAD\"; \
            echo -e \" ----------------------------------------------------\"; \
            echo -e \"  A       B     C    D     --soft   A       B     D\"; \
            echo -e \"                           --mixed  A       D     D\"; \
            echo -e \"                           --hard   D       D     D\"; \
            echo -e \"                           --merge  (disallowed)\"; \
            echo -e \"                           --keep   (disallowed)\"; \
            echo -e \"\"; \
            echo -e \" working index HEAD target         working index HEAD\"; \
            echo -e \" ----------------------------------------------------\"; \
            echo -e \"  A       B     C    C     --soft   A       B     C\"; \
            echo -e \"                           --mixed  A       C     C\"; \
            echo -e \"                           --hard   C       C     C\"; \
            echo -e \"                           --merge  (disallowed)\"; \
            echo -e \"                           --keep   A       C     C\"; \
            echo -e \"\"; \
            echo -e \" working index HEAD target         working index HEAD\"; \
            echo -e \" ----------------------------------------------------\"; \
            echo -e \"  B       B     C    D     --soft   B       B     D\"; \
            echo -e \"                           --mixed  B       D     D\"; \
            echo -e \"                           --hard   D       D     D\"; \
            echo -e \"                           --merge  D       D     D\"; \
            echo -e \"                           --keep   (disallowed)\"; \
            echo -e \"\"; \
            echo -e \" working index HEAD target         working index HEAD\"; \
            echo -e \" ----------------------------------------------------\"; \
            echo -e \"  B       B     C    C     --soft   B       B     C\"; \
            echo -e \"                           --mixed  B       C     C\"; \
            echo -e \"                           --hard   C       C     C\"; \
            echo -e \"                           --merge  C       C     C\"; \
            echo -e \"                           --keep   B       C     C\"; \
            echo -e \"\"; \
            echo -e \" working index HEAD target         working index HEAD\"; \
            echo -e \" ----------------------------------------------------\"; \
            echo -e \"  B       C     C    D     --soft   B       C     D\"; \
            echo -e \"                           --mixed  B       D     D\"; \
            echo -e \"                           --hard   D       D     D\"; \
            echo -e \"                           --merge  (disallowed)\"; \
            echo -e \"                           --keep   (disallowed)\"; \
            echo -e \"\"; \
            echo -e \" working index HEAD target         working index HEAD\"; \
            echo -e \" ----------------------------------------------------\"; \
            echo -e \"  B       C     C    C     --soft   B       C     C\"; \
            echo -e \"                           --mixed  B       C     C\"; \
            echo -e \"                           --hard   C       C     C\"; \
            echo -e \"                           --merge  B       C     C\"; \
            echo -e \"                           --keep   B       C     C\"; \
            echo -e \"\"; \
            echo -e \" The following tables show what happens when there are unmerged entries:\"; \
            echo -e \" X means any state and U means an unmerged index.\"; \
            echo -e \"\"; \
            echo -e \" working index HEAD target         working index HEAD\"; \
            echo -e \" ----------------------------------------------------\"; \
            echo -e \"  X       U     A    B     --soft   (disallowed)\"; \
            echo -e \"                           --mixed  X       B     B\"; \
            echo -e \"                           --hard   B       B     B\"; \
            echo -e \"                           --merge  B       B     B\"; \
            echo -e \"                           --keep   (disallowed)\"; \
            echo -e \"\"; \
            echo -e \" working index HEAD target         working index HEAD\"; \
            echo -e \" ----------------------------------------------------\"; \
            echo -e \"  X       U     A    A     --soft   (disallowed)\"; \
            echo -e \"                           --mixed  X       A     A\"; \
            echo -e \"                           --hard   A       A     A\"; \
            echo -e \"                           --merge  A       A     A\"; \
            echo -e \"                           --keep   (disallowed)\"; \
            echo -e \"\"; \
            }; \
            f"


### diff tools ###

[diff]
	tool = bc
    stat = true

[difftool]
	prompt = false

[difftool "bc"]
	trustExitCode = true

[difftool "compareplusplus"]
	cmd = "\"/home/ogekuri/Compare++/Compare++.exe\" /base \"$LOCAL\" /their \"$REMOTE\""

[difftool "beyondcompare"]
	cmd = "\"/usr/bin/bcompare\" /lefttitle=\"LOCAL\" /righttitle=\"REMOTE\" \"$LOCAL\" \"$REMOTE\""
    renames = true
    trustExitCode = true

[difftool "araxis"]
    path = "\"/home/ogekuri/Araxis/Compare.exe\" /wait /2 /title1:\"LOCAL\" /title2:\"REMOTE\" \"$LOCAL\" \"$REMOTE\""
    renames = true
    trustExitCode = true

[difftool "vimdiff"]
    cmd = vimdiff \"$LOCAL\" \"$REMOTE\"

### merge tools ###

[merge]
	tool = bc
    stat = true

[mergetool]
	prompt = false
	keepBackup = false

[mergetool "bc"]
	trustExitCode = true

[mergetool "compareplusplus"]
	cmd = "\"/home/ogekuri/Compare++/Compare++.exe\" /base \"$BASE\" /their \"$REMOTE\" /mine \"$LOCAL\" /merged \"$MERGED\""
	trustExitCode = true
	
[mergetool "beyondcompare"]
	cmd = "\"/usr/bin/bcompare\" /lefttitle=\"LOCAL\" /righttitle=\"REMOTE\" /centertitle=\"BASE\" /outputtitle=\"MERGED\" \"$LOCAL\" \"$REMOTE\" \"$BASE\" \"$MERGED\""
	trustExitCode = true

[mergetool "araxismerge"]
    cmd = "\"/home/ogekuri/Araxis/Compare.exe\" /wait /a3 /3 /merge /title1:\"LOCAL\" /title2:\"REMOTE\" /title3:\"BASE\" \"$LOCAL\" \"$REMOTE\" \"$BASE\" \"$MERGED\""
    trustExitCode = false

[mergetool "vimdiff"]
    cmd = vimdiff \"$LOCAL\" \"$MERGED\" \"$REMOTE\"

[mergetool "vimdiffcp"]
    cmd = cp \"$BASE\" \"$MERGED\" && vimdiff \"$LOCAL\" \"$MERGED\" \"$REMOTE\"


